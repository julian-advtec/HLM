<!DOCTYPE html>



<html lang="es">



<head>
    <meta charset="UTF-8">
    <title>Administrar Datos</title>
    <link rel="stylesheet" href="/datos.css" />
</head>



<body>


    <div class="fila-vertical">

        <div class="superior">
            <div class="logo-container">
                <img src="media/Logo1.png" alt="Logo" class="logo-img">
            </div>

        </div>


        <div class="seccion seccion-titulo">
            <h1>Administraci√≥n de Ingresos</h1>
        </div>

        <div class="container-form">
            <div class="seccion seccion-formulario">
                <form id="form-dato">
                    <div class="form-row">
                        <input type="text" id="nuevo-dato" placeholder="Nuevo dato" required />
                        <button type="submit">Agregar</button>
                    </div>
                </form>
            </div>
        </div>

        <div class="seccion seccion-lista">
            <div class="contenedor-lista">
                <ul id="lista-datos"></ul>
            </div>

    </div>

    <script>
        const lista = document.getElementById('lista-datos');
        const form = document.getElementById('form-dato');
        const input = document.getElementById('nuevo-dato');

        async function cargarDatos() {
            const res = await fetch('/api/datos');
            const datos = await res.json();
            lista.innerHTML = '';
            datos.forEach((d, i) => {
                const li = document.createElement('li');
                li.textContent = d;
                const btn = document.createElement('button');
                btn.textContent = 'X';
                btn.onclick = async () => {
                    await fetch('/api/datos/' + i, { method: 'DELETE' });
                    cargarDatos();
                };
                li.appendChild(btn);
                lista.appendChild(li);
            });
        }

        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            await fetch('/api/datos', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ valor: input.value })
            });
            input.value = '';
            cargarDatos();
        });

        cargarDatos();
    </script>



</body>


</html>